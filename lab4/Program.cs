using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace lab4
{
    class Program
    {
        static void Main(string[] args)
        {
            var n01 = new Element("01");
            var n02 = new Element("02");
            var n03 = new Element("03");
            var n04 = new Element("04");
            var n05 = new Element("05");
            var n06 = new Element("06");
            var n07 = new Element("07");
            var n08 = new Element("08");
            var n09 = new Element("09");
            var n10 = new Element("10");
            var n11 = new Element("11");
            var n12 = new Element("12");
            var n13 = new Element("13");
            var n14 = new Element("14");
            var n15 = new Element("15");
            var n16 = new Element("16");
            var n17 = new Element("17");
            var n18 = new Element("18");
            var n19 = new Element("19");
            var n20 = new Element("20");
            var n21 = new Element("21");
            var n22 = new Element("22");
            var n23 = new Element("23");
            var n24 = new Element("24");
            var n25 = new Element("25");
            var n26 = new Element("26");
            var n27 = new Element("27");
            var n28 = new Element("28");
            var n29 = new Element("29");
            var n30 = new Element("30");

            n01.AddAdjacentEl(n02).AddAdjacentEl(n03);
            n02.AddAdjacentEl(n04).AddAdjacentEl(n11);
            n03.AddAdjacentEl(n05);
            n04.AddAdjacentEl(n06, false);
            n06.AddAdjacentEl(n08, false);
            n07.AddAdjacentEl(n17);
            n17.AddAdjacentEl(n16);
            n16.AddAdjacentEl(n08).AddAdjacentEl(n15);
            n11.AddAdjacentEl(n10).AddAdjacentEl(n12);
            n10.AddAdjacentEl(n13, false);
            n09.AddAdjacentEl(n14);
            n14.AddAdjacentEl(n19, false);
            n12.AddAdjacentEl(n13, false);
            n13.AddAdjacentEl(n14).AddAdjacentEl(n21);
            n19.AddAdjacentEl(n18, false);
            n22.AddAdjacentEl(n21).AddAdjacentEl(n23).AddAdjacentEl(n25, false);
            n25.AddAdjacentEl(n26).AddAdjacentEl(n24);
            n26.AddAdjacentEl(n20, false).AddAdjacentEl(n27);
            n27.AddAdjacentEl(n28, false).AddAdjacentEl(n29);
            n28.AddAdjacentEl(n29);
            n30.AddAdjacentEl(n29);
         
            var search = new Algorithm();
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("First iteration");
            var path1 = search.A1(n01, n03);
            PrintPath(path1);
            var path11 = search.A1(n01, n05);
            PrintPath(path11);
            Console.WriteLine($"\nTransit element: 05");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Second iteration");
            var path2 = search.A1(n01, n02);
            PrintPath(path2);
            var path22 = search.A1(n01, n04);
            PrintPath(path22);
            var path222 = search.A1(n01, n06);
            PrintPath(path222);
            var path2222 = search.A1(n01, n08);
            PrintPath(path2222);
            var path22222 = search.A1(n01, n16);
            PrintPath(path22222);
            var path222222 = search.A1(n01, n17);
            PrintPath(path222222);
            var path2222222 = search.A1(n01, n07);
            PrintPath(path2222222);
            Console.WriteLine($"\nTransit element: 07");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Third iteration");
            var path3 = search.A1(n01, n02);
            PrintPath(path3);
            var path33 = search.A1(n01, n11);
            PrintPath(path33);
            var path333 = search.A1(n01, n10);
            PrintPath(path333);
            var path3333 = search.A1(n01, n13);
            PrintPath(path3333);
            var path33333 = search.A1(n01, n14);
            PrintPath(path33333);
            var path333333 = search.A1(n01, n09);
            PrintPath(path333333);
            Console.WriteLine($"\nTransit element: 09");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Fifth iteration");
            var path5 = search.A1(n01, n02);
            PrintPath(path5);
            var path55 = search.A1(n01, n04);
            PrintPath(path55);
            var path555 = search.A1(n01, n06);
            PrintPath(path555);
            var path5555 = search.A1(n01, n08);
            PrintPath(path5555);
            var path55555 = search.A1(n01, n16);
            PrintPath(path55555);
            var path555555 = search.A1(n01, n15);
            PrintPath(path555555);
            Console.WriteLine($"\nTransit element: 15");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Sixth iteration");
            var path6 = search.A1(n01, n02);
            PrintPath(path6);
            var path66 = search.A1(n01, n11);
            PrintPath(path66);
            var path666 = search.A1(n01, n10);
            PrintPath(path666);
            var path6666 = search.A1(n01, n13);
            PrintPath(path6666);
            var path66666 = search.A1(n01, n14);
            PrintPath(path66666);
            var path666666 = search.A1(n01, n19);
            PrintPath(path666666);
            var path6666666 = search.A1(n01, n18);
            PrintPath(path6666666);
            Console.WriteLine($"\nTransit element: 18");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Fourth iteration");
            var path4 = search.A1(n01, n02);
            PrintPath(path4);
            var path44 = search.A1(n01, n11);
            PrintPath(path44);
            var path444 = search.A1(n01, n10);
            PrintPath(path444);
            var path4444 = search.A1(n01, n13);
            PrintPath(path4444);
            var path44444 = search.A1(n01, n21);
            PrintPath(path44444);
            var path444444 = search.A1(n01, n22);
            PrintPath(path444444);
            var path4444444 = search.A1(n01, n25);
            PrintPath(path4444444);
            var path44444444 = search.A1(n01, n26);
            PrintPath(path44444444);
            var path444444444 = search.A1(n01, n20);
            PrintPath(path444444444);
            Console.WriteLine($"\nTransit element: 20");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Seventh iteration");
            var path7 = search.A1(n01, n02);
            PrintPath(path7);
            var path77 = search.A1(n01, n11);
            PrintPath(path77);
            var path777 = search.A1(n01, n10);
            PrintPath(path777);
            var path7777 = search.A1(n01, n13);
            PrintPath(path7777);
            var path77777 = search.A1(n01, n21);
            PrintPath(path77777);
            var path777777 = search.A1(n01, n22);
            PrintPath(path777777);
            var path7777777 = search.A1(n01, n23);
            PrintPath(path7777777);
            Console.WriteLine($"\nTransit element: 23");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Eight iteration");
            var path8 = search.A1(n01, n02);
            PrintPath(path8);
            var path88 = search.A1(n01, n11);
            PrintPath(path88);
            var path888 = search.A1(n01, n10);
            PrintPath(path888);
            var path8888 = search.A1(n01, n13);
            PrintPath(path8888);
            var path88888 = search.A1(n01, n21);
            PrintPath(path88888);
            var path888888 = search.A1(n01, n22);
            PrintPath(path888888);
            var path8888888 = search.A1(n01, n25);
            PrintPath(path8888888);
            var path88888888 = search.A1(n01, n24);
            PrintPath(path88888888);
            Console.WriteLine($"\nTransit element: 24");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("Ninth iteration");
            var path9 = search.A1(n01, n02);
            PrintPath(path9);
            var path99 = search.A1(n01, n11);
            PrintPath(path99);
            var path999 = search.A1(n01, n10);
            PrintPath(path999);
            var path9999 = search.A1(n01, n13);
            PrintPath(path9999);
            var path99999 = search.A1(n01, n21);
            PrintPath(path99999);
            var path999999 = search.A1(n01, n22);
            PrintPath(path999999);
            var path9999999 = search.A1(n01, n25);
            PrintPath(path9999999);
            var path99999999 = search.A1(n01, n26);
            PrintPath(path99999999);
            var path999999999 = search.A1(n01, n27);
            PrintPath(path999999999);
            var path9999999999 = search.A1(n01, n28);
            PrintPath(path9999999999);
            var path99999999999 = search.A1(n01, n29);
            PrintPath(path99999999999);
            var path999999999999 = search.A1(n01, n30);
            PrintPath(path999999999999);
            Console.WriteLine($"\nTransit element: 30");
            Console.WriteLine("-----------------------------------------------------------------------------------------------");
            Console.WriteLine("\nTransit elements: 05, 07, 09, 15, 18, 20, 23, 24, 30");
        }

        private static void PrintPath(LinkedList<Element> path)
        {
            Console.WriteLine();
            if (path.Count == 0)
            {
                Console.WriteLine("Can't find the way!");
            }
            else
            {
                Console.WriteLine(string.Join(" -> ", path.Select(x => x.ElementName)));
            }
            Console.Read();
        }
    }
}
